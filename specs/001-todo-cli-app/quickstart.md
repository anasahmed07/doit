# Quickstart Guide: Todo Console Application

**Feature**: 001-todo-cli-app | **Date**: 2026-01-02 | **Audience**: Developers

## Overview

This guide helps developers set up the Todo Console Application development environment and understand the project structure. Follow these steps to start contributing.

## Prerequisites

**Required**:
- Python 3.13+ installed ([python.org/downloads](https://python.org/downloads))
- Git installed
- Terminal/command line access

**Recommended**:
- VS Code or PyCharm with Python extension
- Basic command-line familiarity

## Quick Setup (5 minutes)

### 1. Clone Repository

```bash
git clone <repository-url>
cd doit
```

### 2. Install UV (if not already installed)

**macOS/Linux**:
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

**Windows**:
```powershell
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

**Verify installation**:
```bash
uv --version
```

### 3. Create Virtual Environment and Install Dependencies

```bash
# Create venv with Python 3.13
uv venv --python 3.13

# Activate venv
# Linux/Mac:
source .venv/bin/activate
# Windows:
.venv\Scripts\activate

# Install dependencies
uv pip install -e ".[dev]"
```

### 4. Verify Setup

```bash
# Run tests
pytest

# Run linting
ruff check .

# Run type checking
mypy src/

# Run the app
doit --help
```

**Expected output**:
- All tests pass
- No linting errors
- No type errors
- Help text displays

## Project Structure

```
doit/
├── src/
│   └── doit/               # Application code
│       ├── models/         # Data models (Task)
│       ├── storage/        # Storage backends (memory, file)
│       ├── services/       # Business logic
│       └── cli/            # CLI commands (Typer)
├── tests/
│   ├── unit/               # Unit tests (models, storage, services)
│   └── integration/        # Integration tests (CLI end-to-end)
├── specs/
│   └── 001-todo-cli-app/   # This feature's documentation
│       ├── spec.md         # Requirements
│       ├── plan.md         # Architecture
│       ├── research.md     # Technical decisions
│       ├── data-model.md   # Data structures
│       ├── contracts/      # API contracts
│       │   └── cli-commands.md
│       └── tasks.md        # Task breakdown (generated by /sp.tasks)
├── pyproject.toml          # Project config (dependencies, tools)
├── .specify/               # Constitution and templates
│   └── memory/
│       └── constitution.md # Project principles
└── README.md               # Project overview
```

## Development Workflow

### TDD Cycle (Red-Green-Refactor)

**IMPORTANT**: This project follows strict Test-First Development (TDD). See constitution.md for details.

#### Red Phase: Write Failing Test

```bash
# Create test file
touch tests/unit/test_task_model.py

# Write test (example)
cat > tests/unit/test_task_model.py <<EOF
def test_task_with_empty_title_raises_error():
    with pytest.raises(ValidationError):
        Task(id=1, title="")
EOF

# Run test (should FAIL)
pytest tests/unit/test_task_model.py -v
```

#### Green Phase: Make Test Pass

```bash
# Implement minimal code in src/doit/models/task.py
# Run test again (should PASS)
pytest tests/unit/test_task_model.py -v
```

#### Refactor Phase: Improve Code

```bash
# Clean up code, improve naming, add docs
# Run tests (should STILL PASS)
pytest tests/unit/test_task_model.py -v

# Run full test suite
pytest
```

### Running Tests

```bash
# Run all tests
pytest

# Run with coverage
pytest --cov=src/doit --cov-report=term-missing

# Run specific test file
pytest tests/unit/test_task_model.py

# Run specific test
pytest tests/unit/test_task_model.py::test_task_with_empty_title

# Run with verbose output
pytest -v

# Run with print statements visible
pytest -s
```

### Code Quality

```bash
# Lint code
ruff check .

# Auto-fix linting issues
ruff check --fix .

# Format code
ruff format .

# Type check
mypy src/

# Run all quality checks
ruff check . && ruff format . && mypy src/ && pytest
```

### Running the Application

```bash
# Show help
doit --help

# Add task
doit add "Buy groceries" --description "Milk, eggs, bread"

# List tasks
doit list

# Complete task
doit complete 1

# Update task
doit update 1 --title "Buy organic groceries"

# Delete task
doit delete 1
```

## Common Tasks

### Add a New Command

1. **Define contract** in `specs/001-todo-cli-app/contracts/cli-commands.md`
2. **Write test** in `tests/integration/test_cli_commands.py`
3. **Implement command** in `src/doit/cli/commands.py`
4. **Register command** in `src/doit/cli/main.py`
5. **Run tests** and verify

### Add a New Model Field

1. **Update data model** in `specs/001-todo-cli-app/data-model.md`
2. **Write test** in `tests/unit/test_task_model.py`
3. **Update Task model** in `src/doit/models/task.py`
4. **Update storage** if needed
5. **Update CLI display** if needed
6. **Run tests** and verify

### Fix a Bug

1. **Write failing test** that reproduces the bug
2. **Verify test fails** (Red phase)
3. **Fix the bug** in source code
4. **Verify test passes** (Green phase)
5. **Refactor if needed** (Refactor phase)
6. **Run full suite** to ensure no regressions

## Debugging

### Enable Debug Logging

```python
# Add to cli/main.py
import logging
logging.basicConfig(level=logging.DEBUG)
```

### Use Python Debugger

```python
# Add breakpoint in code
breakpoint()

# Run with debugger
python -m pdb -m doit.cli.main add "Test"
```

### Inspect Test Failures

```bash
# Run with full traceback
pytest --tb=long

# Run with captured output visible
pytest -s

# Drop into debugger on failure
pytest --pdb
```

## Troubleshooting

### Import Errors

**Problem**: `ModuleNotFoundError: No module named 'doit'`

**Solution**:
```bash
# Install in editable mode
uv pip install -e .
```

### UV Not Found

**Problem**: `command not found: uv`

**Solution**:
```bash
# Reinstall UV
curl -LsSf https://astral.sh/uv/install.sh | sh

# Or use pip
pip install uv
```

### Tests Failing

**Problem**: Tests fail with `ModuleNotFoundError`

**Solution**:
```bash
# Ensure venv is activated
source .venv/bin/activate  # Linux/Mac
.venv\Scripts\activate     # Windows

# Reinstall dependencies
uv pip install -e ".[dev]"
```

### Type Errors

**Problem**: `mypy` reports errors

**Solution**:
```bash
# Install type stubs
uv pip install types-all

# Or suppress specific errors (use sparingly)
# type: ignore  # Add to line with error
```

## IDE Setup

### VS Code

**Recommended extensions**:
- Python (ms-python.python)
- Pylance (ms-python.vscode-pylance)
- Ruff (charliermarsh.ruff)

**Settings** (`.vscode/settings.json`):
```json
{
  "python.defaultInterpreterPath": ".venv/bin/python",
  "python.testing.pytestEnabled": true,
  "python.testing.unittestEnabled": false,
  "python.linting.enabled": false,
  "ruff.enable": true,
  "editor.formatOnSave": true,
  "[python]": {
    "editor.defaultFormatter": "charliermarsh.ruff"
  }
}
```

### PyCharm

1. Open project in PyCharm
2. Set Python interpreter: **Settings → Project → Python Interpreter → Add → Virtualenv Environment → Existing → `.venv`**
3. Enable pytest: **Settings → Tools → Python Integrated Tools → Testing → pytest**
4. Configure Ruff: **Settings → Tools → External Tools → Add Ruff**

## Git Workflow

### Feature Branch

```bash
# Check out feature branch (already created by /sp.specify)
git checkout 001-todo-cli-app

# Verify branch
git branch --show-current

# Commit changes
git add .
git commit -m "Implement task model with validation"

# Push to remote
git push -u origin 001-todo-cli-app
```

### Commit Message Format

```
<type>: <short description>

<detailed description if needed>

<footer: refs, breaking changes, etc.>
```

**Types**:
- `feat`: New feature
- `fix`: Bug fix
- `test`: Add/update tests
- `refactor`: Code improvement (no behavior change)
- `docs`: Documentation only
- `chore`: Build, tools, dependencies

**Examples**:
```
feat: add Task model with validation

Implements Task dataclass with:
- Title/description fields
- Validation for empty titles
- Unicode support

Closes #123

---

test: add unit tests for Task validation

Covers edge cases:
- Empty title
- Whitespace-only title
- Unicode characters
- Max length constraints

---

refactor: extract validation logic to separate method

No behavior change, improves testability
```

## Quality Gates (Pre-Commit)

**Before committing, ensure**:
- ✅ All tests pass: `pytest`
- ✅ Linting passes: `ruff check .`
- ✅ Formatting applied: `ruff format .`
- ✅ Type checking passes: `mypy src/`
- ✅ Coverage ≥90%: `pytest --cov=src/doit`

**Automate with pre-commit hook**:

```bash
# Install pre-commit
uv pip install pre-commit

# Set up hooks
pre-commit install

# Run manually
pre-commit run --all-files
```

**`.pre-commit-config.yaml`**:
```yaml
repos:
  - repo: local
    hooks:
      - id: ruff-check
        name: ruff check
        entry: ruff check
        language: system
        types: [python]

      - id: ruff-format
        name: ruff format
        entry: ruff format
        language: system
        types: [python]

      - id: mypy
        name: mypy
        entry: mypy src/
        language: system
        types: [python]
        pass_filenames: false

      - id: pytest
        name: pytest
        entry: pytest
        language: system
        types: [python]
        pass_filenames: false
```

## Next Steps

1. **Read the constitution**: `.specify/memory/constitution.md` - understand project principles
2. **Review the spec**: `specs/001-todo-cli-app/spec.md` - understand requirements
3. **Read the plan**: `specs/001-todo-cli-app/plan.md` - understand architecture
4. **Check contracts**: `specs/001-todo-cli-app/contracts/cli-commands.md` - understand CLI interface
5. **Wait for tasks**: `specs/001-todo-cli-app/tasks.md` - will be generated by `/sp.tasks` command

## Resources

**Documentation**:
- [Typer](https://typer.tiangolo.com/)
- [Rich](https://rich.readthedocs.io/)
- [pytest](https://docs.pytest.org/)
- [Ruff](https://docs.astral.sh/ruff/)
- [Mypy](https://mypy.readthedocs.io/)
- [UV](https://docs.astral.sh/uv/)

**Project-Specific**:
- Constitution: `.specify/memory/constitution.md`
- Spec: `specs/001-todo-cli-app/spec.md`
- Plan: `specs/001-todo-cli-app/plan.md`
- Data Model: `specs/001-todo-cli-app/data-model.md`
- CLI Contracts: `specs/001-todo-cli-app/contracts/cli-commands.md`

## Getting Help

**Issues**: Open an issue in the repository

**Questions**: Ask in project discussions or team chat

**Constitution**: Refer to `.specify/memory/constitution.md` for project principles and workflow

---

**Ready to code!** Start with the TDD cycle: write a failing test, make it pass, refactor, repeat.
